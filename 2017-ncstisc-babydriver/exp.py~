### a test to write base64 to the remote VM
### source: https://github.com/Winter3un/ctf_task/blob/master/ncstisc2017/pwn2/exp.py
if DEBUG:
	p = process(target,env={"LD_LIBRARY_PATH":sys.path[0]})
	# gdb.attach(p,"b*main\nc")
else:
	p = remote(remote_ip,port)

def sl(data):
	p.sendline(data)
def sd(data):
	p.send(data)
def ru(data):
	return p.recvuntil(data)


ru("/ $ ")
time.sleep(5)
# sl('echo "123">/home/ctf/f')
with open("base","rb") as f:
	s = f.read()
length = len(s)
i = 0
size = 1024
while i<length:
	if length-i < size:
		sl("echo '"+s[i:]+"'>>/home/ctf/base")
		break
	else:
		sl("echo '"+s[i:i+size]+"'>>/home/ctf/base") 
	i+=size

p.interactive()
